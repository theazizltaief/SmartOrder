<div class="card">
  <% if plat.photo.attached? %>
    <%= image_tag plat.photo, class: "card-img", alt: plat.nom %>
  <% else %>
    <div class="card-img" style="background: linear-gradient(135deg, #f5f7fa, #c3cfe2); display: flex; align-items: center; justify-content: center; color: #7f8c8d; font-size: 2rem;">
      <%= plat.type_de_plat == "Plat" ? "🍽️" : "🥤" %>
    </div>
  <% end %>
  
  <h3><%= plat.nom %></h3>
  <p><%= plat.description %></p>
  <p class="price"><%= format_price_dt(plat.prix_en_centimes) %></p>

  <% if plat.sauces.any? %>
    <div class="form-group">
      <label>Sauces :</label>
      <% plat.sauces.each do |sauce| %>
        <div>
          <label>
            <input type="checkbox" name="sauces[]" value="<%= sauce %>">
            <%= sauce %>
          </label>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if plat.legumes.any? %>
    <div class="form-group">
      <label>Légumes :</label>
      <% plat.legumes.each do |legume| %>
        <div>
          <label>
            <input type="checkbox" name="legumes[]" value="<%= legume %>">
            <%= legume %>
          </label>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if plat.supplements.any? %>
    <div class="form-group">
      <label>Suppléments :</label>
      <% plat.supplements.each do |supplement| %>
        <div>
          <label>
            <input type="checkbox" name="supplements[]" value="<%= supplement %>">
            <%= supplement %>
          </label>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="form-group">
    <textarea 
      class="form-control" 
      placeholder="Remarques spéciales (ex: sans mayo, bien cuit...)"
      rows="2"
      name="remarques"
    ></textarea>
  </div>
  
  <button 
    class="btn btn-primary" 
    style="width: 100%;"
    data-action="click->panier#ajouter" 
    data-plat-id="<%= plat.id %>"
    data-plat-prix="<%= plat.prix_en_centimes %>"
  >
    ➕ Ajouter au panier
  </button>
</div>
